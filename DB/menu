#!/bin/bash
shopt -s extglob
#let all DB store in spacific dir    -e ->exist

source ./functions/create_db
source ./functions/connect_db
source ./functions/list_db
source ./functions/drop_db
source ./functions/connectMenu_db
source ./functions/list_tb
source ./functions/drop_tb
source ./functions/create_tb


DBDIR="$HOME/Documents/DBMS-Bash/DataBaseDir"

function init_db_dir {
	if [[ ! -e $DBDIR ]]
	then
		mkdir -p $DBDIR
	else
		cd $DBDIR
	fi
	clear
	echo "Database directory Loaded"
}

function main_menu {
  echo "=========================================="
  echo "Welcome to ITI DBMS"
  echo "Working directory: $DBDIR"
  echo "=========================================="
  echo
  while true ;
  do
  	echo ""
        echo "Main Menu"
        echo ""
        echo "1 - Create Database"
        echo "2 - List Databases"
        echo "3 - Connect To Database"
        echo "4 - Drop Database"
        echo "5 - Exit"
        echo ""
        read -r -p "Enter your choice(1-5) : " choice
        
	case $choice in
	"1")
		create_DB
		;;
	
	"2")
		list_db
		;;
		
	"3")
		connect_DB
		;;
	"4")
		drop_db
		;;
	"5") 
		echo "Exiting..."; 
		break 
		;;
	*)
		clear
		echo ""
        	echo "Invalid option."
        	echo "==============="
        	echo ""
        	;;
        esac
   done

}
init_db_dir
main_menu
